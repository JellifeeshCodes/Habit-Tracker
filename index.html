<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ðŸŒ¸Habit TrackerðŸŒ¸</title>
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
     <!-- Handwritten Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: "Patrick Hand", sans-serif;
      background: #fff5f8;
      margin: 0;
      padding: 0;
      color: #4d0033;
    }

    .app {
      max-width: 700px;
      margin: 30px auto;
      padding: 20px;
    }

    h1 {
      text-align: center;
      margin-bottom: 10px;
    }

    .date-time {
      text-align: center;
      font-size: 1rem;
      color: #7a0f3d;
      margin-bottom: 20px;
      font-weight: 500;
    }

    .input-area {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }

    .input-area input {
      flex: 1;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid #ffb6c9;
    }

    .input-area button {
      padding: 10px 14px;
      border-radius: 10px;
      border: none;
      background: #ff9ac2;
      color: white;
      cursor: pointer;
    }

    .habit-list {
      display: block;
    }

    .habit {
      display: block;
      background: white;
      border-radius: 12px;
      padding: 12px;
      margin-bottom: 12px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      position: relative;
      animation: fadeIn 0.3s ease both;
    }

    .habit.dragging {
      opacity: 0.9;
      box-shadow: 0 10px 25px rgba(255,154,194,0.25);
      z-index: 1000;
    }

    .habit:hover::after {
      content: "âœ¨";
      position: absolute;
      top: -8px;
      right: -8px;
      font-size: 1.1rem;
      opacity: 0.9;
      pointer-events: none;
    }

    .habit-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .habit-header label {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    input[type="checkbox"] {
      width: 18px;
      height: 18px;
      accent-color: #ff9ac2;
    }

    .completed-text {
      text-decoration: line-through;
      opacity: 0.5;
    }

    .delete-btn {
      background: #ffb3c6;
      border: none;
      padding: 5px 10px;
      border-radius: 12px;
      cursor: pointer;
      color: #7a0f3d;
    }

    .monthly-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 10px;
    }

    .day {
      width: 28px;
      height: 28px;
      background: #fff0f6;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }

    .day.checked {
      background: #ff9ac2;
      color: white;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(8px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="date-time" id="dateTime"></div>
    <h1>ðŸŒ¸Habit TrackerðŸŒ¸</h1>

    <div class="input-area">
      <input type="text" id="habitInput" placeholder="Add a habit...">
      <button id="addBtn">Add</button>
    </div>

    <div id="habitList" class="habit-list"></div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const dateTimeEl = document.getElementById("dateTime");
      const habitInput = document.getElementById("habitInput");
      const addBtn = document.getElementById("addBtn");
      const habitList = document.getElementById("habitList");
      let habits = [];

      // Live date & time
      function updateTime() {
        const now = new Date();
        dateTimeEl.textContent = now.toLocaleString("en-AU", {
          weekday: "long",
          year: "numeric",
          month: "long",
          day: "numeric",
          hour: "2-digit",
          minute: "2-digit",
          second: "2-digit",
        });
      }
      setInterval(updateTime, 1000);
      updateTime();

      // Render all habits
      function renderHabits() {
        habitList.innerHTML = "";
        habits.forEach((habit, index) => {
          const habitDiv = document.createElement("div");
          habitDiv.className = "habit";
          habitDiv.dataset.index = index;

          const header = document.createElement("div");
          header.className = "habit-header";

          const label = document.createElement("label");
          const checkbox = document.createElement("input");
          checkbox.type = "checkbox";
          checkbox.checked = habit.completed;
          checkbox.addEventListener("change", () => {
            habit.completed = !habit.completed;
            renderHabits();
          });

          const span = document.createElement("span");
          span.textContent = habit.text;
          if (habit.completed) span.className = "completed-text";

          label.appendChild(checkbox);
          label.appendChild(span);

          const deleteBtn = document.createElement("button");
          deleteBtn.textContent = "Delete";
          deleteBtn.className = "delete-btn";
          deleteBtn.addEventListener("click", () => {
            habits.splice(index, 1);
            renderHabits();
          });

          header.appendChild(label);
          header.appendChild(deleteBtn);

          const monthlyGrid = document.createElement("div");
          monthlyGrid.className = "monthly-grid";

          habit.monthly.forEach((day, i) => {
            const dayDiv = document.createElement("div");
            dayDiv.className = day ? "day checked" : "day";
            dayDiv.textContent = i + 1;
            dayDiv.addEventListener("click", () => {
              habit.monthly[i] = !habit.monthly[i];
              renderHabits();
            });
            monthlyGrid.appendChild(dayDiv);
          });

          habitDiv.appendChild(header);
          habitDiv.appendChild(monthlyGrid);
          habitList.appendChild(habitDiv);
        });
      }

      // Add habit
      addBtn.addEventListener("click", () => {
        const text = habitInput.value.trim();
        if (!text) return;
        habits.push({ text, completed: false, monthly: Array(31).fill(false) });
        habitInput.value = "";
        renderHabits();
      });

      habitInput.addEventListener("keydown", (e) => {
        if (e.key === "Enter") addBtn.click();
      });

      // Drag and drop
      new Sortable(habitList, {
        animation: 150,
        onEnd: function(evt) {
          const moved = habits.splice(evt.oldIndex, 1)[0];
          habits.splice(evt.newIndex, 0, moved);
          renderHabits();
        }
      });

      renderHabits();
    });
  </script>
</body>
</html>
